## 2.1 分层思想

- 将复杂的流程分解为几个功能相对单一的子过程；
- 流程更加清晰，复杂问题简单化；
- 更容易发现问题并针对性的解决问题。


## 2.2 OIS参考模型

<img src="https://linley.oss-cn-shanghai.aliyuncs.com/typora_image/1111111111111.png" alt="1111111111111" width = " 1500" />

> OSI 模型(Open Systems Interconnection Model)，由国际化标准组织ISO (The International Organization for Standardization ) 收录在ISO 7489标准中并于1984年发布。

- OIS参考模型中定义了每一层的“作用”
- 定义了每一层“作用”的是“协议”
- “协议”是约定，其具体内容是“规范”
- 我们日常所使用的就是遵循哥哥协议的具体“规范”的产品和通讯手段
- OSI未被广泛认可原因：层次太多麻烦复杂、功能重复

- 分层：模块化、标准化、流程化设计理念
- 带来的好处：减少复杂性、加速技术之间的兼容性、易于学习

- 每一个层次都是独立的（如：工作在物理层的网卡的收发速率的改变，上层不需要变化）
- 但每一层都紧密相连（如：工作在物理层的网卡出现故障，会导致上层都会收到影响 ）

### 2.2.1 各层的作用

1. **物理层：**
   - 在媒介上传输比特流；
   - 提供机械的和电气的规约；
   - 规定了电平、速度和电缆针脚等物理特性。
2. **数据链路层**：
   - 将分组数据封装成帧；
   - 在数据链路上实现数据的点到点、或点到多点方式的直接通信；
   - 差错检测；
   - 将比特组合成字节，再将字节组合成帧，使用链路层地址（以太网使用MAC地址）来访问介质，并进行差错检测。
3. **网络层**：
   - 定义逻辑（IP）地址；实现数据从源到目的地的转发（路由）；
   - 定义逻辑地址，供路由器确定路径，负责将数据从源网络传输到目的网络。

4. **应用层**：
   - 对应用程序提供接口；
   - 定义了应用层协议（HTTP、SNMP等）；
   - OSI参考模型中最靠近用户的一层，为应用程序提供网络服务。
5. **表示层：**
   - 进行数据格式的转换，以确保一个系统生成的应用层数据能够被另外一个系统的应用层所识别和理解；
   - 定义数据的格式；
   - 提供各种用于应用层数据的编码和转换功能，确保一个系统的应用层发送的数据能被另一个系统的应用层识别。
6. **会话层：**
   - 在通信双方之间建立、管理和终止会话；
   - 负责建立、管理和终止表示层实体之间的通信会话；
   - 该层的通信由不同设备中的应用程序之间的服务请求和响应组成。
7. **传输层：**
   - 建立、维护和取消一次端到端的数据传输过程；
   - 控制传输节奏的快慢，调整数据的排序等等；
   - 提供面向连接或非面向连接的数据传递以及进行重传前的差错检测。

## 2.3 TCP/IP分层模型

<img src="https://linley.oss-cn-shanghai.aliyuncs.com/typora_image/1111111111111.png" alt="1111111111111" width = " 1500" />

- TCP/IP模型将网络分为四层。
- TCP/IP模型不关注底层物理介质，主要关注终端之间的逻辑数据流转发。
- TCP/IP模型的核心是网络层和传输层，网络层解决网络之间的逻辑转发问题，传输层保证源端到目的端之间的可靠传输。
- 最上层的应用层通过各种协议向终端用户提供业务应用。

### 2.3.1 各层的作用

1. 应用层
   - 应用层为应用软件提供接口，使应用程序能够使用网络服务。
   - 应用层协议会指定使用相应的传输层协议，以及传输层所使用的端口等。
   -  应用层的PDU(Protocol Data Unit)被称为Data（数据）。
2. 传输层
   - 传输层协议接收来自应用层协议的数据
   - 封装上相应的传输层头部，帮助其建立“端到端”（Port to Port）的连接。
   - 建立主机之间进程与进程之间的连接 
   - 传输层的PDU被称为Segment（段）。
3. 网络层
   - 负责数据从一台主机到另外一台主机之间的传递。 
   - 网络层也叫Internet层 负责将分组报文从源主机发送到目的主机。 
   - 为网络中的设备提供逻辑地址。 
   - 负责数据包的寻径和转发。
   - 网络层的PDU被称为Packet（包）。
4. 数据链路层
   - 可以向网络层的IP、IPv6等协议提供服务。 
   - 以太网（Ethernet）是最常见的数据链路层协议。 
   - 数据链路层向网络层提供“段内通信”。
   - 负责组帧、物理编址、差错控制等功能。
   - 数据链路层的PDU被称为Frame（帧）。
5. 物理层
   - 数据到达物理层之后，物理层会根据物理介质的不同，将数字信号转换成光信号、电信号或者是电磁波信号。
   - 负责比特流在**介质**上的传输。 
   - 物理层的PDU被称为比特流（Bitstream）。  